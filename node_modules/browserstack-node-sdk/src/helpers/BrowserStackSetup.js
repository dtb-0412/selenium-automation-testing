const a90_0x4cde9e=a90_0x5707;(function(_0x3b48e9,_0x4214ed){const _0x261fc1=a90_0x5707,_0x32e82d=_0x3b48e9();while(!![]){try{const _0x5c0c9a=-parseInt(_0x261fc1(0x1cf))/0x1*(-parseInt(_0x261fc1(0x16e))/0x2)+-parseInt(_0x261fc1(0x174))/0x3+parseInt(_0x261fc1(0x213))/0x4+-parseInt(_0x261fc1(0x1ab))/0x5+parseInt(_0x261fc1(0x1ed))/0x6*(-parseInt(_0x261fc1(0x20b))/0x7)+parseInt(_0x261fc1(0x16b))/0x8+parseInt(_0x261fc1(0x215))/0x9;if(_0x5c0c9a===_0x4214ed)break;else _0x32e82d['push'](_0x32e82d['shift']());}catch(_0x58f054){_0x32e82d['push'](_0x32e82d['shift']());}}}(a90_0x1b1d,0xce43b));const util=require(a90_0x4cde9e(0x21d)),os=require('os'),path=require(a90_0x4cde9e(0x235)),{v4:uuidv4}=require(a90_0x4cde9e(0x1f8)),fs=require('fs'),constants=require(a90_0x4cde9e(0x258)),logger=require(a90_0x4cde9e(0x1d3))[a90_0x4cde9e(0x216)],fileLogger=require(a90_0x4cde9e(0x1d3))[a90_0x4cde9e(0x1ad)],{getLogDir}=require(a90_0x4cde9e(0x1d3)),helper=require(a90_0x4cde9e(0x196)),utilities=require(a90_0x4cde9e(0x1b6)),percyHelper=require(a90_0x4cde9e(0x1c9)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require('./performance/constants'),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require(a90_0x4cde9e(0x1ca)),timeoutPromise=require(a90_0x4cde9e(0x167)),BrowserstackCLI=require('../bin/v2/browserstackCLI'),{getEdsInstrumentationAPIUrl}=require(a90_0x4cde9e(0x1f5));function a90_0x5707(_0x58fa93,_0x1c2a60){const _0x1b1da0=a90_0x1b1d();return a90_0x5707=function(_0x57075a,_0x3bb885){_0x57075a=_0x57075a-0x15d;let _0x4ac463=_0x1b1da0[_0x57075a];return _0x4ac463;},a90_0x5707(_0x58fa93,_0x1c2a60);}function a90_0x1b1d(){const _0x46cda9=['userName','uncaughtException','localIdentifier','kifaO','false','Local\x20binary\x20stopped','TCG_AUTH_TIMEOUT','isTurboScaleSession','hubUrl','Lvjgp','sdkRunId','jVFRl','TZpnQ','selfHeal','./helper','RzDwx','VpOdf','getLocalConfig','srxvN','status','HUB_MANAGEMENT','errorMessage','captureError','IcSjW','YyKxr','then','\x20with\x20error\x20','bcXYj','npbBA','debug','Data\x20sent\x20successfully\x20to\x20','tcgAuthConfig','platforms','constructor','isEnabled','2188005TdzhpZ','bind','fileLogger','percy','bWGqc','gUQwq','end','join','mVCgR','myjUj','WXKQe','./utilities','isUndefined','exitHandler','isAuthenticated','getFinalCaps','jMFVx','gHOBh','EdiXR','includes','startPercy','RXRLO','setupPercy','preInitialize','SDK\x20run\x20started\x20with\x20id:\x20','BGEAa','setEnvCaps','VgXcV','BrowserstackHealingInitFailed','error','./percy/utils','./testhub/testhubHandler','Hwhhc','AI_PROXY_FAILURE','RVhUK','wQckE','64765UFILyj','envConfig','Error\x20in\x20percy\x20setup\x20','__isPlaywrightInstalled','./logger','ALmfc','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','stopLocalBinary','browserStackLocalOptions','okbRQ','kOiYE','handleExceptions','mkQro','fireFunnelTestEvent','forceLocal','info','version','setCLICaps','setUpHubUrl','../../package.json','CsFSu','BROWSERSTACK_TURBOSCALE','browserstackLocal','./setKeepAlive','PLEsl','FMYgc','setHandlePWError','length','INVALID_INIT_RESP_WITH_USER_IMPACT','IKPRI','41868sGXeOj','assign','TCG_DOWN','TCG_URL','statusCode','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','isRunning','cancel','../bin/utils/apiUtilityMethods','compareVersions','measureWrapper','uuid','skipSessionName','measures','startMonitoring','sendToEDS','startLocalBinary','Error\x20occured\x20while\x20stopping\x20local\x20binary','4.5.0','isTrialGrid','setupKeepAlive','Failed\x20to\x20send\x20data\x20to\x20','setupBrowserstackLocal','getConfigPath','SDK_CLEANUP','UsAed','No\x20config\x20provided.','zricb','toString','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','14kiYUOr','testContextOptions','2|0|9|12|11|15|10|22|8|6|13|19|20|16|1|14|3|21|17|4|18|7|5','OJqRX','central_scanner','yQhET','stop','Rygqp','6077112iskMWI','checkStopLocalBinaryOnExit','649413SmbMsA','winstonLogger','TsgqT','turboScaleOptions','SIGABRT','stopPercy','cliConfig','IVQOW','util','events.json','env','disableAutoCaptureLogs','isTrue','beforeExit','TCG_AUTH_FAILURE','SIGQUIT','Local\x20binary\x20started\x20successfully','stringify','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','generateLocalIdentifier','normalizeTestReportingEnvVars','split','framework','FoSez','getAccessKey','message','tbNmo','1|0|5|4|2|3','nMbgR','init','SIGTERM','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','path','format','eIzWa','BaJou','vzsGP','RUzju','xbsBx','UPGRADE_REQUIRED','true','allocateHub','Percy\x20stopped','AI_INIT_FAILURE','lQKJq','platform','unhandledRejection','setCredentialsFromYmlConfig','exceptions','intExitHandler','proxy','raUUu','../ai-sdk-node/bundle','PMJYX','SIGHUP','isBrowserstackInfra','MIuwL','VKEPK','skipSessionStatus','cBVuk','uLHgH','AI_INIT_SUCCESSFUL','selenium-webdriver','skipBinaryInitialisation','writeFileSync','url','setupTCGAuth','../bin/utils/constants','requireSeleniumWebdriverCheck','getProxyConfigForTcg','hCZBI','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','getCentralUser','useW3C','stopBrowserstackLocal','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','getHubUrl','killSignal','HtqCA','?caps=','LwwSH','lXHKV','tTNZY','jlXsB','getInstance','accessKey','turboScaleUrl','XOEUO','getPackageVersion','./timeoutPromise','getLocalIdentifier','qQZak','isHealingEnabled','1606608sSsluM','rBoGM','\x20with\x20response\x20','24fMwTDe','vOWhD','initialize','FRAMEWORK','sanitizeCaps','cCLAD','3819075eJISIq','close','SIGINT','SOAij','NWzJF','Percy\x20started\x20successfully','codeceptjs','push','htDHA','SDKTestAttempted','aiHeal:tcgAuth','Shutdown\x20triggered\x20by\x20','playwrightUrl','customRepeaters','config','userName\x20or\x20accessKey\x20is\x20not\x20defined','playwright','readConfig','Error\x20occured\x20while\x20stopping\x20percy','BrowserstackHealing.init\x20method\x20timed\x20out'];a90_0x1b1d=function(){return _0x46cda9;};return a90_0x1b1d();}class BrowserStackSetup{constructor(_0xb2cdf7,_0x2b00ba){const _0x368d3d=a90_0x4cde9e,_0x511b93={'UsAed':_0x368d3d(0x20d),'YyKxr':function(_0x574a3c){return _0x574a3c();},'pBhXI':_0x368d3d(0x207)},_0x2c3221=_0x511b93[_0x368d3d(0x206)][_0x368d3d(0x22a)]('|');let _0x144ca8=0x0;while(!![]){switch(_0x2c3221[_0x144ca8++]){case'0':helper[_0x368d3d(0x229)]();continue;case'1':if(this[_0x368d3d(0x182)]['error'])throw new Error(this[_0x368d3d(0x182)][_0x368d3d(0x1c8)]);continue;case'2':this['unhandledErrors']=[];continue;case'3':helper[_0x368d3d(0x244)](this[_0x368d3d(0x182)]);continue;case'4':helper[_0x368d3d(0x1ba)](this[_0x368d3d(0x182)],this[_0x368d3d(0x21b)],this[_0x368d3d(0x1d0)]);continue;case'5':PerformanceTester[_0x368d3d(0x1fb)]();continue;case'6':this[_0x368d3d(0x19d)]={};continue;case'7':helper['setLogLevel'](this[_0x368d3d(0x182)],this[_0x368d3d(0x21b)],this[_0x368d3d(0x1d0)]);continue;case'8':this['config'][_0x368d3d(0x20c)]=this['config'][_0x368d3d(0x20c)]||{};continue;case'9':this[_0x368d3d(0x1d0)]=helper[_0x368d3d(0x1c5)]();continue;case'10':this[_0x368d3d(0x21b)]=helper[_0x368d3d(0x1e0)](_0xb2cdf7);continue;case'11':this[_0x368d3d(0x1ae)]=null;continue;case'12':this[_0x368d3d(0x1e5)]=null;continue;case'13':this[_0x368d3d(0x192)]=_0x511b93[_0x368d3d(0x1a0)](uuidv4);continue;case'14':helper['setBrowserstackInfraFromConfig'](this['config'],this[_0x368d3d(0x21b)]);continue;case'15':this[_0x368d3d(0x182)]=helper[_0x368d3d(0x185)](helper[_0x368d3d(0x204)](_0xb2cdf7));continue;case'16':if(helper[_0x368d3d(0x1b7)](this[_0x368d3d(0x182)]))throw new Error(_0x511b93['pBhXI']);continue;case'17':this[_0x368d3d(0x182)]['testContextOptions']['skipSessionName']=!helper['isBrowserstackInfra']()||helper['isTrue'](this['config'][_0x368d3d(0x20c)][_0x368d3d(0x1f9)]);continue;case'18':helper['setLogDir'](this['config']);continue;case'19':this[_0x368d3d(0x22b)]=_0x2b00ba;continue;case'20':global['framework']=_0x2b00ba;continue;case'21':this[_0x368d3d(0x182)]['testContextOptions'][_0x368d3d(0x24f)]=!helper[_0x368d3d(0x24c)]()||helper[_0x368d3d(0x221)](this['config']['testContextOptions'][_0x368d3d(0x24f)]);continue;case'22':this[_0x368d3d(0x182)][_0x368d3d(0x1a8)]=this[_0x368d3d(0x182)][_0x368d3d(0x1a8)]||[];continue;}break;}}['preInitialize'](_0x20eb7b){const _0x233c05=a90_0x4cde9e,_0x1f4447={'mVCgR':_0x233c05(0x183),'mkQro':function(_0x39acd5,_0x5c9b91){return _0x39acd5===_0x5c9b91;},'NWzJF':'integrations','nMbgR':_0x233c05(0x17d),'IcSjW':function(_0x1010cb,_0x6549f4){return _0x1010cb<_0x6549f4;},'jMFVx':function(_0x54688a,_0x7e9096){return _0x54688a(_0x7e9096);},'Lvjgp':_0x233c05(0x253),'nEFZm':_0x233c05(0x1ff),'ALmfc':_0x233c05(0x25c),'bMBbD':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','vOWhD':_0x233c05(0x233),'VgXcV':_0x233c05(0x176),'jlXsB':_0x233c05(0x24b),'RUzju':function(_0x8e9a70,_0x5a2946){return _0x8e9a70!==_0x5a2946;},'wQckE':'win32','kOiYE':_0x233c05(0x219),'GBBOJ':_0x233c05(0x224),'lXHKV':'SIGBREAK','HtqCA':_0x233c05(0x222)},_0x7fc252=this[_0x233c05(0x22b)];global[_0x233c05(0x182)]=this[_0x233c05(0x182)],helper[_0x233c05(0x172)](this[_0x233c05(0x182)]),this[_0x233c05(0x262)]=null,global['sdkRunId']=this[_0x233c05(0x192)],logger[_0x233c05(0x1de)](_0x233c05(0x1c3)+this[_0x233c05(0x192)]),!this['config'][_0x233c05(0x1d7)]&&(this[_0x233c05(0x182)]['browserStackLocalOptions']=this['config']['localOptions']||{});if(helper[_0x233c05(0x1b7)](helper['getUserName'](this['config']))||helper[_0x233c05(0x1b7)](helper[_0x233c05(0x22d)](this[_0x233c05(0x182)])))throw new Error(_0x1f4447[_0x233c05(0x1b3)]);helper[_0x233c05(0x199)](this[_0x233c05(0x182)])&&helper[_0x233c05(0x1b7)](helper[_0x233c05(0x168)](this['config']))&&(!helper[_0x233c05(0x1b7)](this[_0x233c05(0x182)][_0x233c05(0x1d7)])&&_0x1f4447[_0x233c05(0x1db)](this[_0x233c05(0x182)][_0x233c05(0x1d7)][_0x233c05(0x1a9)],Object)?!helper[_0x233c05(0x221)](this[_0x233c05(0x182)][_0x233c05(0x1d7)][_0x233c05(0x254)])&&(this['config'][_0x233c05(0x1d7)][_0x233c05(0x18a)]=helper[_0x233c05(0x228)]()):this['config'][_0x233c05(0x1d7)]={'localIdentifier':helper[_0x233c05(0x228)]()});this[_0x233c05(0x182)][_0x233c05(0x1d7)][_0x233c05(0x254)]=helper[_0x233c05(0x221)](this[_0x233c05(0x182)]['browserStackLocalOptions']['skipBinaryInitialisation']),helper[_0x233c05(0x1e9)](this[_0x233c05(0x182)]);if(_0x1f4447[_0x233c05(0x1db)](_0x7fc252,_0x1f4447[_0x233c05(0x178)]))return;this[_0x233c05(0x1da)]();process['env'][_0x233c05(0x1e4)]&&(this[_0x233c05(0x182)]['turboScale']=helper[_0x233c05(0x221)](process[_0x233c05(0x21f)][_0x233c05(0x1e4)]),this[_0x233c05(0x182)][_0x233c05(0x218)]=this[_0x233c05(0x182)][_0x233c05(0x218)]||{});helper[_0x233c05(0x18f)](this[_0x233c05(0x182)])&&(process[_0x233c05(0x21f)][_0x233c05(0x1e4)]=!![]);if(!helper[_0x233c05(0x24c)]()){try{process[_0x233c05(0x21f)]['FRAMEWORK']=_0x7fc252,utilities[_0x233c05(0x1dc)](_0x1f4447[_0x233c05(0x231)],{},this['config'],this[_0x233c05(0x22b)]);}catch(_0x50ddd2){logger[_0x233c05(0x1a5)](_0x233c05(0x260)+_0x50ddd2);}return;}if(helper[_0x233c05(0x259)](_0x7fc252)){if(global[_0x233c05(0x1d2)])return;_0x1f4447[_0x233c05(0x19f)](_0x1f4447[_0x233c05(0x1bb)](parseInt,helper[_0x233c05(0x166)](_0x1f4447['Lvjgp'])),0x3)&&(this['config'][_0x233c05(0x25e)]=![]),_0x1f4447[_0x233c05(0x1db)](helper[_0x233c05(0x1f6)](helper['getPackageVersion'](_0x1f4447[_0x233c05(0x191)]),_0x1f4447['nEFZm']),0x1)&&(this[_0x233c05(0x182)]['useW3C']=!![]);}(helper[_0x233c05(0x1b7)](this[_0x233c05(0x182)][_0x233c05(0x1a8)])||helper[_0x233c05(0x1b7)](this[_0x233c05(0x182)][_0x233c05(0x1a8)][_0x233c05(0x1ea)]))&&(helper[_0x233c05(0x1b7)](this[_0x233c05(0x182)]['parallelsPerPlatform'])?logger['info'](_0x1f4447[_0x233c05(0x1d4)]):logger['warn'](_0x1f4447['bMBbD']),this[_0x233c05(0x182)]['platforms']=[]);!this['config']['testContextOptions']&&(this[_0x233c05(0x182)]['testContextOptions']={});try{process[_0x233c05(0x21f)][_0x233c05(0x171)]=_0x20eb7b['_'][0x0],utilities[_0x233c05(0x1dc)](_0x1f4447['nMbgR'],{},this[_0x233c05(0x182)],this[_0x233c05(0x22b)]);}catch(_0x3cdbd4){logger[_0x233c05(0x1a5)](_0x233c05(0x260)+_0x3cdbd4);}!this[_0x233c05(0x182)][_0x233c05(0x220)]&&logger[_0x233c05(0x1de)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x233c05(0x246)]=this[_0x233c05(0x246)][_0x233c05(0x1ac)](this),process['on'](_0x1f4447[_0x233c05(0x16f)],this['intExitHandler']),process['on'](_0x1f4447[_0x233c05(0x1c6)],this[_0x233c05(0x246)]),process['on'](_0x1f4447[_0x233c05(0x161)],this[_0x233c05(0x246)]),_0x1f4447[_0x233c05(0x23a)](process['platform'],_0x1f4447[_0x233c05(0x1ce)])?(process['on'](_0x1f4447[_0x233c05(0x1d9)],this['intExitHandler']),process['on'](_0x1f4447['GBBOJ'],this[_0x233c05(0x246)])):process['on'](_0x1f4447[_0x233c05(0x15f)],this[_0x233c05(0x246)]),process['on'](_0x1f4447[_0x233c05(0x263)],this[_0x233c05(0x1b8)]());}async[a90_0x4cde9e(0x170)](_0x126c78){const _0x198323=a90_0x4cde9e,_0x286389={'KsGhE':'ats-repeater','gHOBh':'custom-repeater','MIuwL':'true','lQKJq':function(_0xf843f3,_0x2a335a){return _0xf843f3===_0x2a335a;},'VpOdf':_0x198323(0x184),'IKPRI':function(_0x4462dd,_0x1cc32f){return _0x4462dd+_0x1cc32f;},'cBVuk':_0x198323(0x15d),'WXKQe':function(_0x16d63a,_0x5c6490){return _0x16d63a(_0x5c6490);},'TsgqT':_0x198323(0x17a)};this[_0x198323(0x1c2)](_0x126c78);if(helper[_0x198323(0x18f)](this[_0x198323(0x182)])){const _0x5c2b69=await helper['getTurboScaleGridDetails'](this[_0x198323(0x182)]);this[_0x198323(0x182)]['turboScaleGridDetails']=_0x5c2b69,_0x5c2b69[_0x198323(0x200)]&&helper['isNotUndefined'](this[_0x198323(0x182)]['browserstackLocal'])&&helper[_0x198323(0x221)](this[_0x198323(0x182)][_0x198323(0x1e5)])&&(this['config'][_0x198323(0x1d7)]['localIdentifier']=_0x286389['KsGhE'],this[_0x198323(0x182)][_0x198323(0x1d7)][_0x286389[_0x198323(0x1bc)]]=_0x5c2b69[_0x198323(0x181)][_0x198323(0x1b2)](','),this[_0x198323(0x182)][_0x198323(0x1d7)][_0x198323(0x1dd)]=_0x286389[_0x198323(0x24d)]),this[_0x198323(0x182)][_0x198323(0x164)]=_0x5c2b69[_0x198323(0x256)],this[_0x198323(0x22b)]&&_0x286389[_0x198323(0x241)](this['framework']['toLowerCase'](),_0x286389[_0x198323(0x198)])?this[_0x198323(0x182)][_0x198323(0x164)]=_0x286389[_0x198323(0x1ec)](_0x5c2b69[_0x198323(0x180)],_0x286389[_0x198323(0x250)]):constants[_0x198323(0x190)]=helper[_0x198323(0x261)](this['config']),logger[_0x198323(0x1a5)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x198323(0x190)]);}helper['setProxySettings'](this['config']),this[_0x198323(0x201)](),_0x286389[_0x198323(0x1b5)](setPercyFlag,this),await this[_0x198323(0x203)](),![_0x286389[_0x198323(0x217)],_0x286389[_0x198323(0x198)]][_0x198323(0x1be)](this['framework'])&&!helper[_0x198323(0x18f)](this[_0x198323(0x182)])&&!helper[_0x198323(0x25d)]()[_0x198323(0x20f)]&&await this[_0x198323(0x1e1)]();}async[a90_0x4cde9e(0x1c1)](){const _0x26cb81=a90_0x4cde9e,_0x590863={};_0x590863[_0x26cb81(0x1d8)]=function(_0x41db8b,_0x241106){return _0x41db8b===_0x241106;},_0x590863[_0x26cb81(0x160)]=_0x26cb81(0x18c),_0x590863[_0x26cb81(0x1cd)]=_0x26cb81(0x234),_0x590863[_0x26cb81(0x19a)]=_0x26cb81(0x179),_0x590863[_0x26cb81(0x1e3)]='true',_0x590863[_0x26cb81(0x1af)]=_0x26cb81(0x222);const _0x483c32=_0x590863;if(helper[_0x26cb81(0x221)](this[_0x26cb81(0x182)][_0x26cb81(0x1ae)])&&(!this['percy']||!this['percy'][_0x26cb81(0x1f3)]()))try{this[_0x26cb81(0x1ae)]=await percyHelper[_0x26cb81(0x1bf)](this['config']);if(!this['percy']){process[_0x26cb81(0x21f)]['BROWSERSTACK_PERCY']=_0x483c32[_0x26cb81(0x160)];throw new Error(_0x483c32['RVhUK']);}logger[_0x26cb81(0x1de)](_0x483c32[_0x26cb81(0x19a)]),process[_0x26cb81(0x21f)]['BROWSERSTACK_PERCY']=_0x483c32['CsFSu'];let _0x12c553=0x0;const _0x583edf=async()=>{const _0x3237b8=_0x26cb81;_0x12c553++,_0x483c32[_0x3237b8(0x1d8)](_0x12c553,0x1)&&await this[_0x3237b8(0x21a)]();};process['on'](_0x483c32[_0x26cb81(0x1af)],_0x583edf);}catch(_0x39f257){process[_0x26cb81(0x21f)]['BROWSERSTACK_PERCY']=_0x483c32[_0x26cb81(0x160)],logger[_0x26cb81(0x1a5)](_0x26cb81(0x1d1)+_0x39f257);throw new Error(_0x39f257[_0x26cb81(0x209)]());}}async[a90_0x4cde9e(0x21a)](){const _0x3539d2=a90_0x4cde9e,_0x36287f={};_0x36287f[_0x3539d2(0x237)]=_0x3539d2(0x23f),_0x36287f['LwwSH']=_0x3539d2(0x186);const _0x19e233=_0x36287f;if(this['percy']&&this[_0x3539d2(0x1ae)][_0x3539d2(0x1f3)]())try{await percyHelper['stopPercy'](this[_0x3539d2(0x1ae)]),logger[_0x3539d2(0x1de)](_0x19e233['eIzWa']);}catch(_0xced9c9){logger['error'](_0x19e233[_0x3539d2(0x15e)],_0xced9c9[_0x3539d2(0x22e)]);}}async[a90_0x4cde9e(0x203)](){const _0x49a58e=a90_0x4cde9e,_0x1aa1e9={};_0x1aa1e9['raUUu']=_0x49a58e(0x20a),_0x1aa1e9['gUQwq']=_0x49a58e(0x225);const _0x1f64b2=_0x1aa1e9;if(helper['isBrowserstackInfra']()&&helper[_0x49a58e(0x221)](this[_0x49a58e(0x182)][_0x49a58e(0x1e5)])&&(!this[_0x49a58e(0x1e5)]||!this[_0x49a58e(0x1e5)][_0x49a58e(0x1f3)]()))try{if(this['config'][_0x49a58e(0x1d7)][_0x49a58e(0x254)]){logger[_0x49a58e(0x1a5)](_0x1f64b2[_0x49a58e(0x248)]);return;}this[_0x49a58e(0x1e5)]=await helper[_0x49a58e(0x1fd)](this[_0x49a58e(0x182)]),logger[_0x49a58e(0x1de)](_0x1f64b2[_0x49a58e(0x1b0)]);}catch(_0x25998b){logger[_0x49a58e(0x1a5)](_0x25998b);throw new Error(_0x25998b[_0x49a58e(0x209)]());}}async[a90_0x4cde9e(0x25f)](){const _0x48b1ac=a90_0x4cde9e,_0x44633c={};_0x44633c['IVQOW']=_0x48b1ac(0x18d),_0x44633c[_0x48b1ac(0x194)]=_0x48b1ac(0x1fe);const _0xef241b=_0x44633c;if(this[_0x48b1ac(0x1e5)]&&this[_0x48b1ac(0x1e5)]['isRunning']())try{await helper[_0x48b1ac(0x1d6)](this[_0x48b1ac(0x1e5)]),logger[_0x48b1ac(0x1de)](_0xef241b[_0x48b1ac(0x21c)]);}catch(_0x1c073a){logger[_0x48b1ac(0x1c8)](_0xef241b[_0x48b1ac(0x194)],_0x1c073a['message']);}}async['setUpHubUrl'](){const _0x43ec6b=a90_0x4cde9e;return PerformanceTester[_0x43ec6b(0x1f7)](PerformanceAutEvents[_0x43ec6b(0x19c)],async()=>{const _0x21a726=_0x43ec6b;await hubAllocator[_0x21a726(0x23e)](this[_0x21a726(0x182)]);})();}async[a90_0x4cde9e(0x257)](){const _0x3a0238=a90_0x4cde9e,_0x3c7774={'npbBA':function(_0x2b647a,_0x181daf){return _0x2b647a(_0x181daf);},'Rygqp':_0x3a0238(0x249),'dUCGT':function(_0x237a0d,_0x1e1b49,_0x34fe5b,_0x256a48,_0x3d3e44,_0x22554b,_0x2f22fe){return _0x237a0d(_0x1e1b49,_0x34fe5b,_0x256a48,_0x3d3e44,_0x22554b,_0x2f22fe);},'OJqRX':_0x3a0238(0x187),'cCLAD':_0x3a0238(0x1c7),'PMJYX':_0x3a0238(0x1e2),'WboCH':'BrowserstackHealing.init','yQhET':function(_0x3a3687,_0xb491d7){return _0x3a3687===_0xb491d7;},'jVFRl':_0x3a0238(0x23d),'auhAA':function(_0x32882b,_0x1e0730){return _0x32882b===_0x1e0730;},'BaJou':function(_0x117cfb,_0x51f216){return _0x117cfb===_0x51f216;},'htDHA':function(_0x299972,_0x2d4d73){return _0x299972===_0x2d4d73;},'FoSez':_0x3a0238(0x227),'iLYTI':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','FMYgc':_0x3a0238(0x1f2),'SOAij':_0x3a0238(0x1d5),'RXRLO':function(_0x10b772,_0x417589){return _0x10b772>=_0x417589;},'cFXbB':function(_0x38e318,_0x2de266){return _0x38e318<_0x2de266;},'uLHgH':'tcg\x20config\x20setup\x20successful.','BnEEA':_0x3a0238(0x17e),'qQZak':function(_0x332621){return _0x332621();}},_0x23ba0e=PerformanceTester[_0x3a0238(0x1f7)](_0x3c7774['BnEEA'],async()=>{const _0x1537a1=_0x3a0238;try{const _0x2669c7=new Date(),_0x577515=helper[_0x1537a1(0x25a)](this[_0x1537a1(0x182)]),_0x512855=_0x3c7774[_0x1537a1(0x1a4)](require,path[_0x1537a1(0x1b2)](__dirname,_0x3c7774[_0x1537a1(0x212)])),_0x19551d=_0x3c7774['dUCGT'](timeoutPromise,constants[_0x1537a1(0x18e)],_0x3c7774[_0x1537a1(0x20e)],_0x3c7774[_0x1537a1(0x173)],_0x2669c7,this[_0x1537a1(0x182)],this['framework']),_0x45ebf5={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x3c7774[_0x1537a1(0x1a4)](require,_0x3c7774[_0x1537a1(0x24a)])[_0x1537a1(0x1df)],'methodUsed':_0x3c7774['WboCH'],'proxyConfig':_0x577515,'os':os[_0x1537a1(0x242)]()};if(_0x577515&&_0x577515['proxyUrl']){utilities['fireFunnelTestEvent'](constants[_0x1537a1(0x1cc)],_0x45ebf5,this['config'],this['framework']);return;}const _0x2b631c={};_0x2b631c[_0x1537a1(0x247)]=_0x577515;const _0x5b2fbe=await Promise['race']([_0x512855[_0x1537a1(0x232)](this['config'][_0x1537a1(0x163)],this[_0x1537a1(0x182)][_0x1537a1(0x188)],constants[_0x1537a1(0x1f0)],_0x3c7774[_0x1537a1(0x1a4)](require,_0x3c7774['PMJYX'])[_0x1537a1(0x1df)],_0x2b631c)[_0x1537a1(0x1a1)](_0x204416=>{const _0x1d68a1=_0x1537a1;return _0x19551d[_0x1d68a1(0x1f4)](),_0x204416;}),_0x19551d]);_0x5b2fbe[_0x1537a1(0x16a)]=_0x3c7774[_0x1537a1(0x210)](_0x5b2fbe[_0x1537a1(0x16a)],_0x3c7774[_0x1537a1(0x193)])||_0x3c7774['auhAA'](_0x5b2fbe['isHealingEnabled'],!![]);const _0x56ebc3=_0x3c7774['BaJou'](this['config'][_0x1537a1(0x195)],!![])||_0x3c7774[_0x1537a1(0x238)](this[_0x1537a1(0x182)][_0x1537a1(0x195)],_0x3c7774[_0x1537a1(0x193)]);if(_0x3c7774[_0x1537a1(0x17c)](_0x5b2fbe['message'],constants[_0x1537a1(0x23c)])&&_0x56ebc3)logger[_0x1537a1(0x1de)](_0x3c7774[_0x1537a1(0x22c)]);else{if(!_0x5b2fbe[_0x1537a1(0x1b9)]&&_0x3c7774['auhAA'](_0x5b2fbe[_0x1537a1(0x19b)],0x1f7)&&_0x56ebc3)logger[_0x1537a1(0x1de)](_0x3c7774['iLYTI']),utilities[_0x1537a1(0x1dc)](constants[_0x1537a1(0x1ef)],_0x45ebf5,this['config'],this[_0x1537a1(0x22b)]);else{if(!_0x5b2fbe['isAuthenticated']&&_0x56ebc3){logger['info'](_0x3c7774[_0x1537a1(0x1e8)]);const _0x53a77c={'tcgUrl':constants[_0x1537a1(0x1f0)],'sdkVersion':_0x3c7774[_0x1537a1(0x1a4)](require,_0x3c7774[_0x1537a1(0x24a)])[_0x1537a1(0x1df)],'methodUsed':_0x3c7774['WboCH'],'proxyConfig':_0x577515,'os':os[_0x1537a1(0x242)]()};utilities[_0x1537a1(0x1dc)](constants[_0x1537a1(0x223)],_0x53a77c,this[_0x1537a1(0x182)],this['framework']);}else{if(_0x5b2fbe[_0x1537a1(0x1b9)]&&!_0x5b2fbe[_0x1537a1(0x16a)]&&_0x56ebc3)logger[_0x1537a1(0x1de)](_0x3c7774[_0x1537a1(0x177)]);else{if(_0x3c7774[_0x1537a1(0x1c0)](_0x5b2fbe['status'],0xc8)&&_0x3c7774['cFXbB'](_0x5b2fbe[_0x1537a1(0x19b)],0x12c))utilities[_0x1537a1(0x1dc)](constants[_0x1537a1(0x252)],_0x45ebf5,this['config'],this[_0x1537a1(0x22b)]);else{if(_0x3c7774[_0x1537a1(0x1c0)](_0x5b2fbe[_0x1537a1(0x19b)],0x190))_0x45ebf5[_0x1537a1(0x19b)]=_0x5b2fbe[_0x1537a1(0x19b)],utilities[_0x1537a1(0x1dc)](constants[_0x1537a1(0x240)],_0x45ebf5,this[_0x1537a1(0x182)],this['framework']);else!_0x5b2fbe[_0x1537a1(0x19b)]&&utilities['fireFunnelTestEvent'](constants[_0x1537a1(0x1eb)],_0x45ebf5,this['config'],this[_0x1537a1(0x22b)]);}}}}}if(_0x5b2fbe[_0x1537a1(0x1b9)]&&_0x5b2fbe[_0x1537a1(0x16a)]){const _0x4fd966={};_0x4fd966[_0x1537a1(0x1a7)]=_0x5b2fbe;const _0x348550=_0x4fd966;_0x577515&&(_0x348550['proxyConfig']=_0x577515),_0x348550[_0x1537a1(0x22b)]=this[_0x1537a1(0x22b)],_0x348550['bstackConfig']=this[_0x1537a1(0x182)],helper['setupTcgConfigFile'](_0x348550),logger[_0x1537a1(0x1a5)](_0x3c7774[_0x1537a1(0x251)]);}}catch(_0xd5cdc2){logger[_0x1537a1(0x1a5)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0xd5cdc2['message']?_0xd5cdc2[_0x1537a1(0x22e)]:''));}});await _0x3c7774[_0x3a0238(0x169)](_0x23ba0e);}[a90_0x4cde9e(0x201)](){const _0x1c9274=a90_0x4cde9e,_0x5c7cc9={'RzDwx':function(_0x43a35a,_0x3de40a){return _0x43a35a(_0x3de40a);},'vzsGP':_0x1c9274(0x1e6)};_0x5c7cc9[_0x1c9274(0x197)](require,_0x5c7cc9[_0x1c9274(0x239)])();}['handleExceptions'](){const _0x37c9b2=a90_0x4cde9e,_0xfb43d3={};_0xfb43d3[_0x37c9b2(0x208)]=_0x37c9b2(0x243),_0xfb43d3[_0x37c9b2(0x1cb)]=_0x37c9b2(0x189);const _0x2a1d48=_0xfb43d3,_0x37441d=_0x2683fb=>{const _0x252363=_0x37c9b2;logger[_0x252363(0x1c8)](_0x2683fb['message']),logger[_0x252363(0x1a5)](util['format'](_0x2683fb)),this['unhandledErrors'][_0x252363(0x17b)](util['format']('%j',_0x2683fb)),PerformanceTester[_0x252363(0x19e)](_0x2683fb);};process['on'](_0x2a1d48[_0x37c9b2(0x208)],_0x37441d),process['on'](_0x2a1d48[_0x37c9b2(0x1cb)],_0x37441d);}async['intExitHandler'](_0x1761da){const _0x27e98c=a90_0x4cde9e,_0x4ea576={};_0x4ea576[_0x27e98c(0x16c)]=_0x27e98c(0x230),_0x4ea576['xbsBx']=function(_0x814738,_0x590359){return _0x814738+_0x590359;},_0x4ea576[_0x27e98c(0x22f)]='handled',_0x4ea576[_0x27e98c(0x25b)]=function(_0x2d3478,_0x4f78a3){return _0x2d3478+_0x4f78a3;},_0x4ea576[_0x27e98c(0x165)]=function(_0x15abff,_0x36f450){return _0x15abff+_0x36f450;},_0x4ea576['myjUj']=_0x27e98c(0x17f);const _0x37fbf0=_0x4ea576,_0x54090f=_0x37fbf0[_0x27e98c(0x16c)][_0x27e98c(0x22a)]('|');let _0x5e0863=0x0;while(!![]){switch(_0x54090f[_0x5e0863++]){case'0':this[_0x37fbf0[_0x27e98c(0x23b)](_0x37fbf0[_0x27e98c(0x22f)],_0x1761da)]=!![];continue;case'1':if(this[_0x37fbf0[_0x27e98c(0x25b)](_0x37fbf0[_0x27e98c(0x22f)],_0x1761da)])return;continue;case'2':await TestHubHandler[_0x27e98c(0x211)](_0x1761da);continue;case'3':await BrowserstackCLI[_0x27e98c(0x162)]()[_0x27e98c(0x211)]();continue;case'4':this[_0x27e98c(0x262)]=_0x1761da;continue;case'5':logger[_0x27e98c(0x1de)](_0x37fbf0[_0x27e98c(0x165)](_0x37fbf0[_0x27e98c(0x1b4)],_0x1761da));continue;}break;}}[a90_0x4cde9e(0x1b8)](){const _0x5418a8=a90_0x4cde9e,_0x526e2a={'VKEPK':function(_0x3ca6d3,_0x3e7564){return _0x3ca6d3===_0x3e7564;},'EdiXR':'Calling\x20Build\x20Stop\x20from\x20ExitHandler','kifaO':function(_0x2bb7be,_0x42e7da){return _0x2bb7be>_0x42e7da;},'grjkg':function(_0x1331e7,_0x1c4bc7){return _0x1331e7(_0x1c4bc7);},'bcXYj':function(_0x374c6f,_0x59f0b7){return _0x374c6f(_0x59f0b7);},'PLEsl':function(_0x4b3c34){return _0x4b3c34();},'BGEAa':_0x5418a8(0x21e)};let _0x478076=0x0;return async()=>{const _0x13bb6d=_0x5418a8;_0x478076++;if(_0x526e2a[_0x13bb6d(0x24e)](_0x478076,0x1)){helper[_0x13bb6d(0x214)](this[_0x13bb6d(0x22b)])&&await this['stopBrowserstackLocal']();try{logger[_0x13bb6d(0x1a5)](_0x526e2a[_0x13bb6d(0x1bd)]),await TestHubHandler[_0x13bb6d(0x211)](_0x478076),await BrowserstackCLI[_0x13bb6d(0x162)]()[_0x13bb6d(0x211)]('1');}catch(_0x2d409b){logger[_0x13bb6d(0x1a5)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x13bb6d(0x236)](_0x2d409b));}PerformanceTester[_0x13bb6d(0x1b1)](PerformanceEvents[_0x13bb6d(0x205)]);if(PerformanceTester[_0x13bb6d(0x1aa)]()){const {measures:_0xf7968e,errors:_0x125f61}=await PerformanceTester['finalize'](),_0x16cb69={};if(_0xf7968e&&_0x526e2a['kifaO'](_0xf7968e[_0x13bb6d(0x1ea)],0x0)||_0x125f61&&_0x526e2a[_0x13bb6d(0x18b)](_0x125f61[_0x13bb6d(0x1ea)],0x0)){const _0xf08335={};_0xf08335[_0x13bb6d(0x1fa)]=_0xf7968e,_0xf08335[_0x13bb6d(0x245)]=_0x125f61,Object[_0x13bb6d(0x1ee)](_0x16cb69,_0xf08335);}try{const _0x4efb95=await helper[_0x13bb6d(0x1fc)](_0x16cb69,this[_0x13bb6d(0x182)]);logger[_0x13bb6d(0x1a5)](_0x13bb6d(0x1a6)+_0x526e2a['grjkg'](getEdsInstrumentationAPIUrl,'')+_0x13bb6d(0x16d)+_0x4efb95[_0x13bb6d(0x1f1)]);}catch(_0x4e72cb){logger[_0x13bb6d(0x1a5)](_0x13bb6d(0x202)+_0x526e2a[_0x13bb6d(0x1a3)](getEdsInstrumentationAPIUrl,'')+_0x13bb6d(0x1a2)+util[_0x13bb6d(0x236)](_0x4e72cb));}try{fs[_0x13bb6d(0x255)](path[_0x13bb6d(0x1b2)](_0x526e2a[_0x13bb6d(0x1e7)](getLogDir),_0x526e2a[_0x13bb6d(0x1c4)]),JSON[_0x13bb6d(0x226)](_0x16cb69));}catch(_0x44e451){logger[_0x13bb6d(0x1a5)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x44e451);}}}logger&&logger[_0x13bb6d(0x175)](),fileLogger&&fileLogger['close']();};}}exports['default']=BrowserStackSetup;