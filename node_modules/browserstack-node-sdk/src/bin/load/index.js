#!/usr/bin/env node
'use strict';function a28_0x1da2(){const _0xcc33d6=['CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','slice','../../helpers/helper','Waiting\x20for\x20child\x20process\x20to\x20exit...','BROWSERSTACK_USER','readConfig','../v2/cliUtils','exit','forEach','2222345TdIpnD','2520984VyxcqP','BROWSERSTACK_ACCESS_KEY','157024XFMYej','./loadUtils','env','wBWlL','7455760wXQiWy','1480818fAAItx','inherit','4HzhXaG','HLifX','KJRfA','child_process','join','stringify','SIGTERM','Spawning:\x20','argv','accessKey','load','error','207256pdWMBD','SIGQUIT','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','bKToM','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','path','message','vqoLA','DKFYx','winstonLogger','\x20exited\x20with\x20code\x20','../../helpers/logger','getCliDir','tOOme','debug','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','close','killed','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','BROWSERSTACK_ACCESSKEY','99CxzIfP','RVyiD','Failed\x20to\x20determine\x20CLI\x20directory','Error\x20details:\x20','Error\x20loading\x20configuration:\x20','2ZemXIC','OUVrc','Configuration\x20path:\x20','gsQgS','yoxEE','Received\x20',',\x20forwarding\x20to\x20child\x20process...','pDJnu','\x20load\x20','SIGHUP','stack','289773yUcCNK','THXjt','Error\x20Details:\x20'];a28_0x1da2=function(){return _0xcc33d6;};return a28_0x1da2();}const a28_0x25fbed=a28_0x3c7c;(function(_0x45a626,_0x3cf9ec){const _0x5200c8=a28_0x3c7c,_0x54f530=_0x45a626();while(!![]){try{const _0x223159=-parseInt(_0x5200c8(0x18e))/0x1+parseInt(_0x5200c8(0x183))/0x2*(parseInt(_0x5200c8(0x1a2))/0x3)+-parseInt(_0x5200c8(0x1a4))/0x4*(parseInt(_0x5200c8(0x19a))/0x5)+-parseInt(_0x5200c8(0x19b))/0x6+-parseInt(_0x5200c8(0x19d))/0x7+-parseInt(_0x5200c8(0x16a))/0x8*(-parseInt(_0x5200c8(0x17e))/0x9)+parseInt(_0x5200c8(0x1a1))/0xa;if(_0x223159===_0x3cf9ec)break;else _0x54f530['push'](_0x54f530['shift']());}catch(_0x42a72a){_0x54f530['push'](_0x54f530['shift']());}}}(a28_0x1da2,0x54cb9));const {spawn}=require(a28_0x25fbed(0x1a7)),path=require(a28_0x25fbed(0x16f)),helper=require(a28_0x25fbed(0x193)),CLIUtils=require(a28_0x25fbed(0x197)),{getLoadConfigPath,sleep}=require(a28_0x25fbed(0x19e)),logger=require(a28_0x25fbed(0x175))[a28_0x25fbed(0x173)];async function executeLoadTest(_0x2e2caa){const _0x3bc193=a28_0x25fbed,_0x931073={'pDJnu':function(_0x1f6d84,_0x5e6ade){return _0x1f6d84(_0x5e6ade);},'TAkVd':_0x3bc193(0x17a),'uBNaT':_0x3bc193(0x194),'PAuqy':_0x3bc193(0x17c),'KJRfA':function(_0x535809){return _0x535809();},'wBWlL':_0x3bc193(0x16c),'vqoLA':_0x3bc193(0x180),'OUVrc':function(_0x2e21f0){return _0x2e21f0();},'LpDGr':_0x3bc193(0x179),'yoxEE':_0x3bc193(0x191),'tOOme':_0x3bc193(0x16e),'THXjt':function(_0x221d90,_0x3a7b2f,_0x4c48d2,_0x42ec0f){return _0x221d90(_0x3a7b2f,_0x4c48d2,_0x42ec0f);},'HLifX':_0x3bc193(0x168),'DKFYx':_0x3bc193(0x1a3),'rTjPP':'SIGINT','RVyiD':_0x3bc193(0x1aa),'nLMxG':_0x3bc193(0x16b),'gsQgS':_0x3bc193(0x18c),'JGwcI':function(_0x3aba19){return _0x3aba19();}};try{const _0x3254cc=process['argv'][_0x3bc193(0x192)](0x2),_0x3065ae=_0x3254cc[_0x3bc193(0x192)](0x1);logger[_0x3bc193(0x178)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x3065ae);let _0x26980e={};try{logger[_0x3bc193(0x178)](_0x931073['PAuqy']);const _0x448d30={};_0x448d30['userName']=process[_0x3bc193(0x19f)]['BROWSERSTACK_USERNAME']||process[_0x3bc193(0x19f)][_0x3bc193(0x195)],_0x448d30[_0x3bc193(0x167)]=process['env'][_0x3bc193(0x19c)]||process['env'][_0x3bc193(0x17d)],_0x26980e=_0x448d30;if(!_0x26980e['userName']||!_0x26980e['accessKey']){const _0x2f574f=_0x931073[_0x3bc193(0x18a)](getLoadConfigPath,_0x2e2caa[_0x3bc193(0x166)]);logger[_0x3bc193(0x178)](_0x3bc193(0x185)+_0x2f574f),_0x2f574f&&(_0x26980e=helper[_0x3bc193(0x196)](_0x2f574f));}}catch(_0x56745f){logger[_0x3bc193(0x169)](_0x3bc193(0x182)+_0x56745f[_0x3bc193(0x170)]),logger[_0x3bc193(0x178)](_0x3bc193(0x181)+(_0x56745f['stack']||JSON[_0x3bc193(0x1a9)](_0x56745f))),await _0x931073[_0x3bc193(0x1a6)](sleep),process[_0x3bc193(0x198)](0x1);}(!_0x26980e['userName']||!_0x26980e[_0x3bc193(0x167)])&&(logger[_0x3bc193(0x169)](_0x931073[_0x3bc193(0x1a0)]),await _0x931073[_0x3bc193(0x1a6)](sleep),process['exit'](0x1));const _0x3b447=CLIUtils[_0x3bc193(0x176)]();!_0x3b447&&(logger['error'](_0x931073[_0x3bc193(0x171)]),await _0x931073[_0x3bc193(0x184)](sleep),process[_0x3bc193(0x198)](0x1));let _0x574679=CLIUtils['getExistingCliPath'](_0x3b447);try{!_0x574679?(logger[_0x3bc193(0x178)](_0x931073['LpDGr']),_0x574679=await CLIUtils['checkAndUpdateCli']('',_0x3b447,_0x26980e)):(logger['debug'](_0x931073[_0x3bc193(0x187)]),_0x574679=await CLIUtils['checkAndUpdateCli'](_0x574679,_0x3b447,_0x26980e));}catch(_0x5c8a64){logger['error'](_0x931073['wBWlL']),logger['debug'](_0x3bc193(0x190)+(_0x5c8a64[_0x3bc193(0x18d)]||JSON[_0x3bc193(0x1a9)](_0x5c8a64))),await _0x931073['OUVrc'](sleep),process[_0x3bc193(0x198)](0x1);}!_0x574679&&(logger[_0x3bc193(0x169)](_0x931073[_0x3bc193(0x1a0)]),logger[_0x3bc193(0x178)](_0x931073[_0x3bc193(0x177)]),await _0x931073[_0x3bc193(0x1a6)](sleep),process[_0x3bc193(0x198)](0x1));logger[_0x3bc193(0x178)](_0x3bc193(0x165)+_0x574679+_0x3bc193(0x18b)+_0x3065ae[_0x3bc193(0x1a8)]('\x20'));const _0x1ef3c2=_0x931073[_0x3bc193(0x18f)](spawn,_0x574679,[_0x931073[_0x3bc193(0x1a5)],..._0x3065ae],{'stdio':_0x931073[_0x3bc193(0x172)]});let _0x464539=![];const _0x438a2e=new Promise(_0x4eb91f=>{_0x1ef3c2['on'](_0x931073['TAkVd'],_0x243721=>{const _0x4653ec=a28_0x3c7c;logger[_0x4653ec(0x178)](_0x574679+_0x4653ec(0x174)+_0x243721),_0x931073[_0x4653ec(0x18a)](_0x4eb91f,_0x243721);});});[_0x931073['rTjPP'],_0x931073[_0x3bc193(0x17f)],_0x931073['nLMxG'],_0x931073[_0x3bc193(0x186)]][_0x3bc193(0x199)](_0x543b86=>{const _0x5de9fe=_0x3bc193,_0x244494={};_0x244494[_0x5de9fe(0x16d)]=_0x931073['uBNaT'];const _0x2032f3=_0x244494;process['on'](_0x543b86,()=>{const _0x317b2c=_0x5de9fe;if(_0x464539)return;_0x464539=!![],logger[_0x317b2c(0x178)](_0x317b2c(0x188)+_0x543b86+_0x317b2c(0x189)),_0x1ef3c2&&!_0x1ef3c2[_0x317b2c(0x17b)]&&(_0x1ef3c2['kill'](_0x543b86),logger['debug'](_0x2032f3[_0x317b2c(0x16d)]));});});const _0x479b30=await _0x438a2e;await _0x931073[_0x3bc193(0x1a6)](sleep),process[_0x3bc193(0x198)](_0x479b30);}catch(_0x5571fe){logger['error']('Failed\x20initiating\x20load\x20test:\x20'+_0x5571fe['message']),logger['debug'](_0x3bc193(0x181)+(_0x5571fe[_0x3bc193(0x18d)]||JSON[_0x3bc193(0x1a9)](_0x5571fe))),await _0x931073['JGwcI'](sleep),process[_0x3bc193(0x198)](0x1);}}function a28_0x3c7c(_0x335e23,_0x4e78ee){const _0x1da2ed=a28_0x1da2();return a28_0x3c7c=function(_0x3c7c37,_0x3814f6){_0x3c7c37=_0x3c7c37-0x165;let _0x15a26a=_0x1da2ed[_0x3c7c37];return _0x15a26a;},a28_0x3c7c(_0x335e23,_0x4e78ee);}module['exports']=executeLoadTest;