#!/usr/bin/env node

function a49_0x37c7(){const _0x4f2bf2=['6327AJUWvx','YqeIj','../helpers/logger','writeFileSync','replace','readFileSync','iMHdk','browserstack-node-sdk','indexOf','error','oOiez','../helpers/utilities','zKGHX','3651637pZFsiY','1048gyBIsn','debug','load','12935oKrKPM','OMdya','codeceptjs','eHESU','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','push','GJniP','join','4twXwNs','length','browserstack-node-sdk\x20','lBajh','node-setup','Dqmxg','stringify','/../../browserstack.pw.yml.sample','JOWyl','fpjfb','590828aMbnIC','node','Setup\x20completed','winstonLogger','yargs','cwd','197553THfbJI','1050180DvdhCW','mzQcF','5246bTUsAa','postinstall','npm\x20update\x20browserstack-node-sdk','Adding\x20new\x20script(s)\x20in\x20package.json...','includes','rkxvF','playwright','WNMjc','key','/package.json','YOUR_ACCESS_KEY','67ljFUHS','mNWLC','HHXfr','\x20&&\x20npm\x20update\x20browserstack-node-sdk','QxKoj','isUndefined','../helpers/helper','username','SDKSetup','info','xRRhq','js-yaml','YOUR_USERNAME','split','mocha','jest','162iciThk','utf8','/../../browserstack.yml.sample','splice','source','argv','parse','-browserstack','scripts'];a49_0x37c7=function(){return _0x4f2bf2;};return a49_0x37c7();}const a49_0x2249f9=a49_0x6eac;(function(_0x9ea819,_0x561848){const _0x5e5548=a49_0x6eac,_0x1c9819=_0x9ea819();while(!![]){try{const _0x5431dd=parseInt(_0x5e5548(0x166))/0x1*(parseInt(_0x5e5548(0x15b))/0x2)+parseInt(_0x5e5548(0x158))/0x3*(parseInt(_0x5e5548(0x198))/0x4)+parseInt(_0x5e5548(0x190))/0x5*(-parseInt(_0x5e5548(0x176))/0x6)+parseInt(_0x5e5548(0x1a2))/0x7+-parseInt(_0x5e5548(0x18d))/0x8*(-parseInt(_0x5e5548(0x17f))/0x9)+parseInt(_0x5e5548(0x159))/0xa+-parseInt(_0x5e5548(0x18c))/0xb;if(_0x5431dd===_0x561848)break;else _0x1c9819['push'](_0x1c9819['shift']());}catch(_0x45f1d8){_0x1c9819['push'](_0x1c9819['shift']());}}}(a49_0x37c7,0x1d9cb));function a49_0x6eac(_0x2600f1,_0x56906e){const _0x37c707=a49_0x37c7();return a49_0x6eac=function(_0x6eac98,_0x26cac1){_0x6eac98=_0x6eac98-0x157;let _0x4e523e=_0x37c707[_0x6eac98];return _0x4e523e;},a49_0x6eac(_0x2600f1,_0x56906e);}const fs=require('fs'),helper=require(a49_0x2249f9(0x16c)),utilities=require(a49_0x2249f9(0x18a)),yaml=require(a49_0x2249f9(0x171)),yargs=require(a49_0x2249f9(0x1a6)),logger=require(a49_0x2249f9(0x181))[a49_0x2249f9(0x1a5)],configFileTemplate=__dirname+a49_0x2249f9(0x178),configFileTemplatePW=__dirname+a49_0x2249f9(0x19f),configFile=process[a49_0x2249f9(0x157)]()+'/browserstack.yml',packageFile=process[a49_0x2249f9(0x157)]()+a49_0x2249f9(0x164),frameworks=[a49_0x2249f9(0x174),a49_0x2249f9(0x175),'cucumber-js',a49_0x2249f9(0x1a3),'nightwatch',a49_0x2249f9(0x192),a49_0x2249f9(0x161)];let config;logger[a49_0x2249f9(0x16f)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a49_0x2249f9(0x17b)][a49_0x2249f9(0x16d)],yargs['argv'][a49_0x2249f9(0x163)],yargs[a49_0x2249f9(0x17b)][a49_0x2249f9(0x161)]);try{sdkSetup();}catch(a49_0x204e94){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x204e94);}addScriptInPackageJson();function createConfigurationFile(_0x47c303,_0x172649,_0x20a878=![]){const _0x51042e=a49_0x2249f9,_0x3a1375={};_0x3a1375['YqeIj']=_0x51042e(0x177),_0x3a1375[_0x51042e(0x162)]=_0x51042e(0x172),_0x3a1375[_0x51042e(0x167)]=_0x51042e(0x165);const _0x5276d9=_0x3a1375;try{let _0x46f28e=fs[_0x51042e(0x184)](_0x20a878?configFileTemplatePW:configFileTemplate,_0x5276d9[_0x51042e(0x180)]);_0x47c303&&(_0x46f28e=_0x46f28e[_0x51042e(0x183)](_0x5276d9['WNMjc'],_0x47c303)),_0x172649&&(_0x46f28e=_0x46f28e['replace'](_0x5276d9['mNWLC'],_0x172649)),config=yaml[_0x51042e(0x18f)](_0x46f28e),fs[_0x51042e(0x182)](configFile,_0x46f28e,_0x3fb82e=>{const _0x5c4655=_0x51042e;_0x3fb82e&&logger[_0x5c4655(0x188)](_0x3fb82e);});}catch(_0x2f96b7){logger[_0x51042e(0x188)](_0x2f96b7);}}function addPostInstallScript(_0x3030e2,_0x5520f6){const _0x49a614=a49_0x2249f9,_0x437a51={};_0x437a51[_0x49a614(0x196)]=_0x49a614(0x15c),_0x437a51[_0x49a614(0x15a)]=_0x49a614(0x15d),_0x437a51['lBajh']=_0x49a614(0x169);const _0x47f1a4=_0x437a51;let _0xf06b8b=_0x3030e2[_0x47f1a4[_0x49a614(0x196)]];if(_0xf06b8b&&_0xf06b8b[_0x49a614(0x15f)](_0x47f1a4[_0x49a614(0x15a)]))return;!_0xf06b8b?_0xf06b8b=_0x47f1a4['mzQcF']:_0xf06b8b+=_0x47f1a4[_0x49a614(0x19b)],_0x5520f6['push']([_0x47f1a4[_0x49a614(0x196)],_0xf06b8b]);}function addScriptInPackageJson(){const _0xc96f1f=a49_0x2249f9,_0x22b886={'WdaLr':_0xc96f1f(0x177),'OMdya':function(_0x4b0a26,_0x576e9e){return _0x4b0a26<_0x576e9e;},'fpjfb':function(_0x2c3190,_0x54d93b,_0x308798){return _0x2c3190(_0x54d93b,_0x308798);},'zKGHX':function(_0x2a5320,_0x5c8f5f,_0x27c665){return _0x2a5320(_0x5c8f5f,_0x27c665);},'eHESU':function(_0x40c97c,_0x19c05b){return _0x40c97c!==_0x19c05b;},'HHXfr':_0xc96f1f(0x15e)},_0x40161c=JSON[_0xc96f1f(0x17c)](fs[_0xc96f1f(0x184)](packageFile,_0x22b886['WdaLr'])),_0x1c8bfb=[];for(let _0x48f73a=0x0;_0x22b886[_0xc96f1f(0x191)](_0x48f73a,frameworks[_0xc96f1f(0x199)]);_0x48f73a+=0x1){const _0x288069=_0x22b886['fpjfb'](findScriptsWithFramework,_0x40161c['scripts'],frameworks[_0x48f73a]);for(let _0x3b454e=0x0;_0x22b886[_0xc96f1f(0x191)](_0x3b454e,_0x288069['length']);_0x3b454e+=0x1){_0x1c8bfb[_0xc96f1f(0x195)](_0x22b886[_0xc96f1f(0x1a1)](getUpdatedCommand,_0x40161c[_0xc96f1f(0x17e)],_0x288069[_0x3b454e]));}_0x22b886[_0xc96f1f(0x18b)](addPostInstallScript,_0x40161c['scripts'],_0x1c8bfb);}const _0x455bce={..._0x40161c[_0xc96f1f(0x17e)]},_0x1c687a=_0x455bce;for(let _0x1f4ebb=0x0;_0x22b886['OMdya'](_0x1f4ebb,_0x1c8bfb['length']);_0x1f4ebb+=0x1){_0x1c687a[_0x1c8bfb[_0x1f4ebb][0x0]]=_0x1c8bfb[_0x1f4ebb][0x1];}_0x22b886[_0xc96f1f(0x193)](JSON[_0xc96f1f(0x19e)](_0x40161c[_0xc96f1f(0x17e)]),JSON[_0xc96f1f(0x19e)](_0x1c687a))&&(logger['info'](_0x22b886[_0xc96f1f(0x168)]),_0x40161c[_0xc96f1f(0x17e)]=_0x1c687a,fs[_0xc96f1f(0x182)](packageFile,JSON['stringify'](_0x40161c,null,0x2),_0xc0bf9d=>{const _0x135832=_0xc96f1f;_0xc0bf9d&&logger[_0x135832(0x188)](_0xc0bf9d);}));};function findScriptsWithFramework(_0x195e8b,_0x5a76a1){const _0x19d9c2=a49_0x2249f9,_0x4d709a={};_0x4d709a[_0x19d9c2(0x185)]=function(_0x5278ac,_0xcb74fc){return _0x5278ac<_0xcb74fc;},_0x4d709a[_0x19d9c2(0x1a0)]=_0x19d9c2(0x186);const _0x9b87d5=_0x4d709a,_0x4f793b=[],_0x26df5c=Object['entries'](_0x195e8b);for(let _0x557d96=0x0;_0x9b87d5[_0x19d9c2(0x185)](_0x557d96,_0x26df5c[_0x19d9c2(0x199)]);_0x557d96+=0x1){_0x26df5c[_0x557d96][0x1][_0x19d9c2(0x15f)](_0x5a76a1)&&!_0x26df5c[_0x557d96][0x1][_0x19d9c2(0x15f)](_0x9b87d5[_0x19d9c2(0x1a0)])&&_0x4f793b[_0x19d9c2(0x195)](_0x26df5c[_0x557d96][0x0]);}return _0x4f793b;}function getUpdatedCommand(_0x5c9e2d,_0x3e623b){const _0x16a15e=a49_0x2249f9,_0x10dab2={};_0x10dab2[_0x16a15e(0x170)]=function(_0x4eefae,_0x446b4c){return _0x4eefae!==_0x446b4c;},_0x10dab2['rkxvF']=_0x16a15e(0x186),_0x10dab2[_0x16a15e(0x189)]=function(_0x83cb8,_0x1d072b){return _0x83cb8===_0x1d072b;};const _0x95ceb8=_0x10dab2,_0x18545a=_0x3e623b+_0x16a15e(0x17d),_0x402ff4=_0x5c9e2d[_0x3e623b],_0x55ca42=_0x402ff4[_0x16a15e(0x173)]('\x20');for(const _0x393156 of frameworks){if(_0x95ceb8['xRRhq'](_0x55ca42[_0x16a15e(0x187)](_0x393156),-0x1)){_0x55ca42[_0x16a15e(0x179)](_0x55ca42[_0x16a15e(0x187)](_0x393156),0x0,_0x95ceb8[_0x16a15e(0x160)]);break;}}let _0x1ca435=_0x55ca42[_0x16a15e(0x197)]('\x20');return _0x95ceb8[_0x16a15e(0x189)](_0x1ca435,_0x402ff4)&&(_0x1ca435=_0x16a15e(0x19a)+_0x402ff4),[_0x18545a,_0x1ca435];}function sdkSetup(){const _0x487ca4=a49_0x2249f9,_0x3f99a6={};_0x3f99a6[_0x487ca4(0x16a)]=_0x487ca4(0x19c),_0x3f99a6[_0x487ca4(0x19d)]=_0x487ca4(0x16e);const _0xf67e95=_0x3f99a6;if(helper[_0x487ca4(0x16b)](config))return;config[_0x487ca4(0x17a)]=_0xf67e95['QxKoj'];try{utilities['fireFunnelTestEvent'](_0xf67e95[_0x487ca4(0x19d)],{},config,'');}catch(_0x23d670){logger[_0x487ca4(0x18e)](_0x487ca4(0x194)+_0x23d670);}}logger[a49_0x2249f9(0x16f)](a49_0x2249f9(0x1a4));