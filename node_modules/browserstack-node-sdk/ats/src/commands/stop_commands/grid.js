const a21_0x52b0cb=a21_0x575f;(function(_0x4ab6f2,_0x2945fb){const _0x262f2d=a21_0x575f,_0x568ebb=_0x4ab6f2();while(!![]){try{const _0x1a4699=parseInt(_0x262f2d(0x12d))/0x1*(parseInt(_0x262f2d(0x14b))/0x2)+parseInt(_0x262f2d(0x13a))/0x3*(parseInt(_0x262f2d(0x137))/0x4)+-parseInt(_0x262f2d(0x11a))/0x5+-parseInt(_0x262f2d(0x14d))/0x6*(-parseInt(_0x262f2d(0x127))/0x7)+-parseInt(_0x262f2d(0x118))/0x8+parseInt(_0x262f2d(0x120))/0x9*(-parseInt(_0x262f2d(0x141))/0xa)+-parseInt(_0x262f2d(0x15b))/0xb*(-parseInt(_0x262f2d(0x15a))/0xc);if(_0x1a4699===_0x2945fb)break;else _0x568ebb['push'](_0x568ebb['shift']());}catch(_0x534964){_0x568ebb['push'](_0x568ebb['shift']());}}}(a21_0xa0a1,0xba9f4));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x52b0cb(0x11b)),{logger}=require(a21_0x52b0cb(0x147)),{getCredentialsPath,getGridDetails}=require(a21_0x52b0cb(0x13f)),{scaleDownHubDeployment}=require(a21_0x52b0cb(0x14c)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a21_0x52b0cb(0x116)),{createK8sClient}=require(a21_0x52b0cb(0x12c)),{getCloudProviderObject}=require(a21_0x52b0cb(0x153));exports[a21_0x52b0cb(0x13e)]=a21_0x52b0cb(0x142),exports[a21_0x52b0cb(0x10f)]=a21_0x52b0cb(0x13d),exports['builder']=function(_0x277cc2){const _0x4c2904=a21_0x52b0cb,_0x196690={};_0x196690['XcwoC']=_0x4c2904(0x115),_0x196690['nQHFG']=_0x4c2904(0x15d),_0x196690['Looyj']='Skip\x20insecure\x20cert\x20verification.',_0x196690[_0x4c2904(0x11e)]=_0x4c2904(0x144),_0x196690[_0x4c2904(0x130)]=_0x4c2904(0x11c);const _0x37cf62=_0x196690,_0x48f68b={};_0x48f68b['description']=_0x37cf62[_0x4c2904(0x123)],_0x48f68b['type']=_0x37cf62[_0x4c2904(0x109)];const _0x54c75e={};_0x54c75e[_0x4c2904(0x12f)]=_0x37cf62[_0x4c2904(0x134)],_0x54c75e['type']=_0x37cf62[_0x4c2904(0x11e)],_0x54c75e[_0x4c2904(0x121)]=![];const _0x2d8cce={};return _0x2d8cce[_0x4c2904(0x12a)]=_0x48f68b,_0x2d8cce[_0x4c2904(0x14a)]=_0x54c75e,_0x277cc2['usage'](HELP_HEADER_MESSAGE['stop'])['epilogue'](HELP_FOOTER_MESSAGE)[_0x4c2904(0x143)](_0x2d8cce)[_0x4c2904(0x11c)](_0x37cf62[_0x4c2904(0x130)])['argv'];},exports[a21_0x52b0cb(0x13b)]=async function(_0x54eedb){const _0x48aff7=a21_0x52b0cb,_0x3fa5d8={'cKFbM':_0x48aff7(0x131),'eeVeC':function(_0x138b21){return _0x138b21();},'zuUFR':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','UMUFG':function(_0x40e59a,_0x59e5a2,_0x2a7309,_0x29dc10,_0xa44aa2,_0xee7f05,_0x3d3a06){return _0x40e59a(_0x59e5a2,_0x2a7309,_0x29dc10,_0xa44aa2,_0xee7f05,_0x3d3a06);},'nENZr':_0x48aff7(0x148),'ciPYh':'init-not-called','pDQwz':function(_0x517225,_0x4508fa,_0x2e9cc2,_0x1e7aca,_0x414bec,_0x35deaa,_0x4a618d){return _0x517225(_0x4508fa,_0x2e9cc2,_0x1e7aca,_0x414bec,_0x35deaa,_0x4a618d);},'psNgO':function(_0x405597){return _0x405597();},'LWvYI':'<UsernamePlaceholder>','TaqXZ':_0x48aff7(0x124),'AejgF':_0x48aff7(0x112),'gUnok':function(_0x170c7d,_0x361ff5,_0x331a4e,_0x3ccec0){return _0x170c7d(_0x361ff5,_0x331a4e,_0x3ccec0);},'ptGLa':function(_0x4528de,_0x15cd2d,_0x40f9ec,_0x45cd35,_0x2211d3,_0xb4a07b,_0x421155){return _0x4528de(_0x15cd2d,_0x40f9ec,_0x45cd35,_0x2211d3,_0xb4a07b,_0x421155);},'NNZDL':function(_0x5e584b,_0x182f1c,_0x831292){return _0x5e584b(_0x182f1c,_0x831292);},'lCmVu':_0x48aff7(0x13c),'mwRGN':function(_0x478097,_0x617691){return _0x478097===_0x617691;},'qVtcZ':_0x48aff7(0x128),'YaMLM':function(_0x5d79ac,_0x187e67,_0x2d135c,_0x59a11f,_0x4181e9,_0x12aed1,_0x50ebab){return _0x5d79ac(_0x187e67,_0x2d135c,_0x59a11f,_0x4181e9,_0x12aed1,_0x50ebab);},'ovEwA':_0x48aff7(0x117),'wcLte':function(_0x1a6d25,_0x567dd4){return _0x1a6d25===_0x567dd4;},'DlJrP':_0x48aff7(0x114),'HcEtd':_0x48aff7(0x110)};let _0x5986af;try{!_0x54eedb['gridId']&&(logger[_0x48aff7(0x156)](_0x3fa5d8[_0x48aff7(0x14e)]),process[_0x48aff7(0x159)](0x1));!fs[_0x48aff7(0x15c)](_0x3fa5d8[_0x48aff7(0x10d)](getCredentialsPath))&&(logger[_0x48aff7(0x156)](_0x3fa5d8[_0x48aff7(0x107)]),await _0x3fa5d8[_0x48aff7(0x113)](sendInstrumentationEvent,_0x54eedb,_0x3fa5d8[_0x48aff7(0x133)],messageTypes['ERROR'],_0x3fa5d8[_0x48aff7(0x111)],null,_0x54eedb),process[_0x48aff7(0x159)](0x1));logger[_0x48aff7(0x119)](_0x48aff7(0x157)+_0x54eedb[_0x48aff7(0x122)]),await _0x3fa5d8[_0x48aff7(0x146)](sendInstrumentationEvent,_0x54eedb,_0x3fa5d8[_0x48aff7(0x133)],messageTypes['INFO'],null,null,_0x54eedb);const _0x4fd858=JSON[_0x48aff7(0x145)](fs['readFileSync'](_0x3fa5d8['psNgO'](getCredentialsPath)));global_registry['bstackUsername']=_0x4fd858[_0x48aff7(0x11d)][_0x48aff7(0x108)],global_registry[_0x48aff7(0x154)]=_0x4fd858[_0x48aff7(0x11d)][_0x48aff7(0x14f)];const _0x838a7=WS_ENDPOINT['replace'](_0x3fa5d8[_0x48aff7(0x10c)],_0x4fd858['Browserstack'][_0x48aff7(0x108)])['replace'](_0x3fa5d8[_0x48aff7(0x125)],_0x4fd858[_0x48aff7(0x11d)][_0x48aff7(0x14f)]),_0x35eaa6={};_0x35eaa6[_0x48aff7(0x126)]=ws,_0x35eaa6['connectionTimeout']=0x36ee80,_0x5986af=new ReconnectingWebSocket(_0x838a7,[],_0x35eaa6),logger['debug'](_0x3fa5d8['AejgF']),webSocketUtils[_0x48aff7(0x150)](_0x5986af,_0x54eedb['user'],_0x54eedb['password']);const [_0x1acf05,_0x59517b]=await _0x3fa5d8[_0x48aff7(0x155)](getGridDetails,_0x4fd858[_0x48aff7(0x11d)]['username'],_0x4fd858['Browserstack'][_0x48aff7(0x14f)],_0x54eedb[_0x48aff7(0x122)]);if(_0x59517b){const _0x404103=_0x59517b[_0x48aff7(0x119)];global_registry[_0x48aff7(0x136)]=_0x404103[_0x48aff7(0x136)],global_registry[_0x48aff7(0x10a)]=_0x404103[_0x48aff7(0x140)],global_registry[_0x48aff7(0x149)]=_0x404103[_0x48aff7(0x149)];const _0x39d2da=await _0x3fa5d8['ptGLa'](getCloudProviderObject,_0x404103[_0x48aff7(0x136)],_0x404103[_0x48aff7(0x149)],_0x404103['name'],_0x5986af,webSocketUtils,_0x54eedb),[_0x4f2a29,_0x813655,_0x44c830,_0x5cfc8b,_0x2fbc27,_0x4d04ec]=await _0x3fa5d8['NNZDL'](createK8sClient,_0x39d2da,_0x54eedb[_0x48aff7(0x138)]);await _0x3fa5d8['NNZDL'](scaleDownHubDeployment,_0x813655,_0x404103[_0x48aff7(0x15e)]),logger['info'](_0x3fa5d8[_0x48aff7(0x158)]),process[_0x48aff7(0x159)](0x0);}_0x3fa5d8['mwRGN'](_0x1acf05['statusCode'],0x191)&&(logger['error'](_0x3fa5d8[_0x48aff7(0x132)]),await _0x3fa5d8[_0x48aff7(0x135)](sendInstrumentationEvent,_0x54eedb,_0x3fa5d8[_0x48aff7(0x133)],messageTypes[_0x48aff7(0x11f)],_0x3fa5d8['ovEwA'],null,_0x54eedb),process[_0x48aff7(0x159)](0x1)),_0x3fa5d8[_0x48aff7(0x151)](_0x1acf05[_0x48aff7(0x152)],0x190)&&(logger[_0x48aff7(0x156)](JSON[_0x48aff7(0x145)](_0x1acf05[_0x48aff7(0x12e)])[_0x48aff7(0x139)]),await _0x3fa5d8[_0x48aff7(0x146)](sendInstrumentationEvent,_0x54eedb,_0x3fa5d8[_0x48aff7(0x133)],messageTypes[_0x48aff7(0x11f)],_0x3fa5d8['DlJrP'],null,_0x54eedb),process[_0x48aff7(0x159)](0x1)),logger['error'](_0x48aff7(0x10b)+JSON[_0x48aff7(0x10e)](_0x1acf05)),await _0x3fa5d8[_0x48aff7(0x129)](sendInstrumentationEvent,_0x54eedb,_0x3fa5d8[_0x48aff7(0x133)],messageTypes[_0x48aff7(0x11f)],_0x3fa5d8['HcEtd'],_0x1acf05,_0x54eedb),process['exit'](0x1);}catch(_0x105cbb){const _0x5a45e1=_0x48aff7(0x12b)+_0x105cbb+'\x20\x0a'+JSON[_0x48aff7(0x10e)](_0x105cbb['stack'])+'\x20';logger['error'](_0x5a45e1),process[_0x48aff7(0x159)](0x1);}};function a21_0x575f(_0x4b2bd2,_0x5a94b4){const _0xa0a12c=a21_0xa0a1();return a21_0x575f=function(_0x575fea,_0xef52e){_0x575fea=_0x575fea-0x107;let _0xcd782c=_0xa0a12c[_0x575fea];return _0xcd782c;},a21_0x575f(_0x4b2bd2,_0x5a94b4);}function a21_0xa0a1(){const _0x2ad3bd=['Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','qVtcZ','nENZr','Looyj','YaMLM','cloudProvider','147104vCfQxK','skipTlsCertVerify','message','39ScWpKd','handler','Grid\x20stoppped.','Stop\x20a\x20running\x20Automation\x20grid.','command','../../utils/utilityMethods','region','10riCWln','grid','options','boolean','parse','pDQwz','../../config/logger','stop-grid-called','clusterName','skip-tls-cert-verify','58BsVusz','../../utils/gridComponents','786FysLWF','cKFbM','password','addListeners','wcLte','statusCode','../../cloudproviders/utils','bstackAccesskey','gUnok','error','Stopping\x20grid\x20','lCmVu','exit','6795384VPeoOm','33PrbWYQ','existsSync','string','name','zuUFR','username','nQHFG','clusterRegion','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','LWvYI','eeVeC','stringify','desc','server-error','ciPYh','Adding\x20Websocket\x20listeners','UMUFG','invalid-grid-id','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','../../utils/webSocketUtils','unauthorised','11407056Kviqzr','info','243215bafLoV','../../config/constants','help','Browserstack','sedzT','ERROR','8806869IdKoaT','default','gridId','XcwoC','<PasswordPlaceholder>','TaqXZ','WebSocket','46305WeCFUy','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','ptGLa','grid-id','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','../../utils/createk8sClient','5999NLpSTD','body','description','LMfbK'];a21_0xa0a1=function(){return _0x2ad3bd;};return a21_0xa0a1();}